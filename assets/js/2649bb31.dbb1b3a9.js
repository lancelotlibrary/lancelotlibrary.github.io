"use strict";(self.webpackChunk_drayman_docs=self.webpackChunk_drayman_docs||[]).push([[4538],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),u=i,h=m["".concat(s,".").concat(u)]||m[u]||d[u]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,r[1]=l;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1810:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(7462),i=(n(7294),n(3905));const o={slug:"getting-started-with-drayman",title:"Getting started with Drayman",author:"Yan Ivan Evdokimov",author_url:"https://github.com/jansivans",author_image_url:"https://avatars.githubusercontent.com/u/5667073?v=4",tags:["drayman","node","typescript","javascript","jsx","guide"]},r=void 0,l={permalink:"/blog/getting-started-with-drayman",editUrl:"https://github.com/Claviz/drayman/blob/main/blog/blog/2021-08-17-getting-started-with-drayman.mdx",source:"@site/blog/2021-08-17-getting-started-with-drayman.mdx",title:"Getting started with Drayman",description:"Drayman is a server-side component framework that allows you to use any available HTML element, web component or custom Drayman third-party component together with server-side code in a single script.",date:"2021-08-17T00:00:00.000Z",formattedDate:"August 17, 2021",tags:[{label:"drayman",permalink:"/blog/tags/drayman"},{label:"node",permalink:"/blog/tags/node"},{label:"typescript",permalink:"/blog/tags/typescript"},{label:"javascript",permalink:"/blog/tags/javascript"},{label:"jsx",permalink:"/blog/tags/jsx"},{label:"guide",permalink:"/blog/tags/guide"}],readingTime:3.45,truncated:!1,prevItem:{title:"Building a real-time Todo app with Drayman, MongoDB and Tailwind CSS",permalink:"/blog/building-real-time-todo-app-with-drayman-mongodb-and-tailwind-css"}},s=[{value:"File viewer component",id:"file-viewer-component",children:[{value:"Initial component template",id:"initial-component-template",children:[]},{value:"Filling select with options",id:"filling-select-with-options",children:[]},{value:"Reacting to user actions",id:"reacting-to-user-actions",children:[]}]},{value:"Conclusion",id:"conclusion",children:[]}],c={toc:s},p="wrapper";function m(e){let{components:t,...o}=e;return(0,i.kt)(p,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"http://www.drayman.io"},"Drayman")," is a server-side component framework that allows you to use any available HTML element, web component or custom Drayman third-party component together with server-side code in a single script."),(0,i.kt)("p",null,"With Drayman, the browser only renders what the user should see - all logic and calculations happen server-side and UI is written using JSX syntax."),(0,i.kt)("p",null,"The best way to show Drayman capabilities is to create something with it. So let's get started."),(0,i.kt)("h2",{id:"file-viewer-component"},"File viewer component"),(0,i.kt)("p",null,"Let's build a component that allows the user to select a file from the file system and view it's contents."),(0,i.kt)("p",null,"First, you need to install Drayman. It can be done by running these commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npx @drayman/framework-init@latest my-app\ncd my-app\nnpm start\n")),(0,i.kt)("p",null,"The website will be available at http://localhost:3033."),(0,i.kt)("h3",{id:"initial-component-template"},"Initial component template"),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"src/components/home.tsx")," and replace its contents with this code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/home.tsx"',title:'"src/components/home.tsx"'},"export const component: DraymanComponent = async () => {\n  return async () => {\n    return (\n      <>\n        <p>Select a file to view it directly from file system</p>\n        <select></select>\n        <br />\n        <pre></pre>\n      </>\n    );\n  };\n};\n")),(0,i.kt)("p",null,"You will see an initial skeleton of our component. Further ",(0,i.kt)("inlineCode",{parentName:"p"},"<select>")," will be used to show available files and ",(0,i.kt)("inlineCode",{parentName:"p"},"<pre>")," will show contents of the selected file."),(0,i.kt)("h3",{id:"filling-select-with-options"},"Filling select with options"),(0,i.kt)("p",null,"Because Drayman runs a component server-side, we can use any Node.js library. In our case we will use the ",(0,i.kt)("inlineCode",{parentName:"p"},"fs")," module."),(0,i.kt)("p",null,"Let's read file names from the project root directory and fill ",(0,i.kt)("inlineCode",{parentName:"p"},"<select>")," options with them:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/home.tsx"',title:'"src/components/home.tsx"'},'import { promises as fs } from "fs";\n\nexport const component: DraymanComponent = async () => {\n  //highlight-next-line\n  const files = (await fs.readdir("./")).filter((x) => x.includes("."));\n\n  return async () => {\n    return (\n      <>\n        <p>Select a file to view it directly from file system</p>\n        //highlight-start\n        <select>\n          {files.map((fileName) => (\n            <option>{fileName}</option>\n          ))}\n        </select>\n        //highlight-end\n        <br />\n        <pre></pre>\n      </>\n    );\n  };\n};\n')),(0,i.kt)("p",null,"Right now our component is only showing some elements without any interactivity. Our next step will be to add it."),(0,i.kt)("h3",{id:"reacting-to-user-actions"},"Reacting to user actions"),(0,i.kt)("p",null,"We need to remember which file the user has selected to show its contents. It can be done by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"onchange")," event attribute and attaching a function that will be ",(0,i.kt)("a",{parentName:"p",href:"http://www.drayman.io/docs/components-in-depth/handling-events"},"executed server-side"),". We also need to add the ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," attribute to each ",(0,i.kt)("inlineCode",{parentName:"p"},"option")," so that ",(0,i.kt)("inlineCode",{parentName:"p"},"select")," would know which option was selected."),(0,i.kt)("p",null,"Let's also add the ",(0,i.kt)("inlineCode",{parentName:"p"},"fs.readFile")," function inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"<pre>")," tag so that Drayman would read file contents during re-render. We won't show the ",(0,i.kt)("inlineCode",{parentName:"p"},"pre")," until a file is actually selected:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/home.tsx"',title:'"src/components/home.tsx"'},'import { promises as fs } from "fs";\n\nexport const component: DraymanComponent = async () => {\n  const files = (await fs.readdir("./")).filter((x) => x.includes("."));\n  //highlight-next-line\n  let selectedFile;\n\n  return async () => {\n    return (\n      <>\n        <p>Select a file to view it directly from file system</p>\n        <select\n          //highlight-start\n          onchange={async ({ value }) => {\n            selectedFile = value;\n          }}\n          //highlight-end\n        >\n          {files.map((fileName) => (\n            //highlight-next-line\n            <option value={fileName}>{fileName}</option>\n          ))}\n        </select>\n        <br />\n        //highlight-next-line\n        {selectedFile && <pre>{await fs.readFile(selectedFile, "utf-8")}</pre>}\n      </>\n    );\n  };\n};\n')),(0,i.kt)("p",null,"If you make a selection from the dropdown, you will see that nothing happens on the page - file contents don't appear. That is because with Drayman you must strictly tell when a component needs to be re-rendered. It can be done by using a special ",(0,i.kt)("a",{parentName:"p",href:"http://www.drayman.io/docs/components-in-depth/helpers/introduction"},"helper function")," ",(0,i.kt)("inlineCode",{parentName:"p"},"forceUpdate"),"."),(0,i.kt)("p",null,"Import it and add to the ",(0,i.kt)("inlineCode",{parentName:"p"},"onchange")," event after the selected file was saved:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/home.tsx"',title:'"src/components/home.tsx"'},'import { promises as fs } from "fs";\n\nexport const component: DraymanComponent = async ({\n  //highlight-next-line\n  forceUpdate,\n}) => {\n  const files = (await fs.readdir("./")).filter((x) => x.includes("."));\n  let selectedFile;\n\n  return async () => {\n    return (\n      <>\n        <p>Select a file to view it directly from file system</p>\n        <select\n          onchange={async ({ value }) => {\n            selectedFile = value;\n            //highlight-next-line\n            await forceUpdate();\n          }}\n        >\n          {files.map((fileName) => (\n            <option value={fileName}>{fileName}</option>\n          ))}\n        </select>\n        <br />\n        {selectedFile && <pre>{await fs.readFile(selectedFile, "utf-8")}</pre>}\n      </>\n    );\n  };\n};\n')),(0,i.kt)("p",null,"Now our component is complete and file contents are shown on select:\n",(0,i.kt)("img",{alt:"final-result",src:n(2474).Z})),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"We have built a component that combines server-side logic and client-side view in a single script."),(0,i.kt)("p",null,"If this felt interesting to you, visit the ",(0,i.kt)("a",{parentName:"p",href:"http://www.drayman.io/"},"official docs")," to deep-dive into Drayman framework!"))}m.isMDXComponent=!0},2474:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/final-result-12a50e5524325e09278972f54251eae1.gif"}}]);